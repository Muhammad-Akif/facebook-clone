{"ast":null,"code":"var _jsxFileName = \"/home/muhammad/Desktop/Working Areas/Saylani Working directory/React/facebook/src/ImageUpload.js\";\nimport React, { useState } from 'react';\nimport './ImageUpload.css';\nimport { Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Button from \"@material-ui/core/Button\";\nimport { storage, db } from \"./firebase.js\";\nimport { useHistory } from \"react-router-dom\";\nimport './ImageUpload.css';\nimport firebase from \"firebase\";\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: 500,\n    height: 343,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #DDDFE2',\n    outline: 'none',\n    boxShadow: theme.shadows[5],\n    borderRadius: '5px'\n  }\n}));\n\nfunction ImageUpload({\n  username\n}) {\n  const classes = useStyles();\n  const [modalStyle] = useState(getModalStyle);\n  const [open, setOpen] = useState(false);\n  const [comment, setComment] = useState('');\n  const [noLikes, setNoLikes] = useState(0);\n  const [image, setImage] = useState('');\n  const [caption, setCaption] = useState('');\n  const [progress, setProgress] = useState(0);\n\n  const uploadFileWithClick = () => {\n    document.getElementsByClassName('imageFile')[0].click();\n  };\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleUpload = event => {\n    event.preventDefault();\n\n    if (image == '') {\n      db.collection(\"posts\").add({\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n        caption: caption,\n        imageUrl: image,\n        noLikes: noLikes,\n        username: username\n      });\n    } else {\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        setProgress(progress);\n      }, error => {\n        console.log(error);\n        alert(error.message);\n      }, () => {\n        storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n          db.collection(\"posts\").add({\n            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n            caption: caption,\n            imageUrl: url,\n            noLikes: noLikes,\n            username: username\n          });\n          handleClose();\n          setProgress(0);\n          setCaption(\"\");\n          setImage(null);\n        });\n      });\n    }\n  };\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageupload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"imageupload__commentAssign\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageupload__firstSectionModal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, \"Create Post\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageupload__secondSectionModal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"imageupload__avatar\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: e => setCaption(e.target.value),\n    onClick: handleOpen,\n    placeholder: `What's on your mind ${username} ?`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageupload__imageuploadModal\",\n    onClick: uploadFileWithClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://image.flaticon.com/icons/svg/3233/3233027.svg\",\n    className: \"imageupload__gallery\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"imageFile\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 29\n    }\n  }, \"Photo\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageupload__feedModal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    class: \"containerr\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    class: \"checkmark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"imageupload__colorwrap1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://www.flaticon.com/premium-icon/icons/svg/1674/1674711.svg\",\n    className: \"imageupload__newsFeed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  }, \"News Feed\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    className: `imageText ${image && 'show'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 29\n    }\n  }, \"Image is added and will be displayed after clicking the Post button\"), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    onClick: handleUpload,\n    className: \"imageupload__submitButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 29\n    }\n  }, \"Post\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageupload__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageupload__firstSection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 21\n    }\n  }, \"Create Post\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageupload__secondSection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"imageupload__avatar\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onClick: handleOpen,\n    placeholder: `What's on your mind ${username} ?`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"uploadimage__options\",\n    onClick: setOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageupload__imageupload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://image.flaticon.com/icons/svg/3233/3233027.svg\",\n    className: \"imageupload__gallery\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 25\n    }\n  }, \"Photo\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageupload__more\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://image.flaticon.com/icons/svg/860/860760.svg\",\n    className: \"imageupload__dots\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"progress\", {\n    value: progress,\n    max: \"100\",\n    className: `progress ${progress && 'show'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default ImageUpload;","map":{"version":3,"sources":["/home/muhammad/Desktop/Working Areas/Saylani Working directory/React/facebook/src/ImageUpload.js"],"names":["React","useState","Avatar","makeStyles","Modal","Button","storage","db","useHistory","firebase","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","height","backgroundColor","palette","background","border","outline","boxShadow","shadows","borderRadius","ImageUpload","username","classes","modalStyle","open","setOpen","comment","setComment","noLikes","setNoLikes","image","setImage","caption","setCaption","progress","setProgress","uploadFileWithClick","document","getElementsByClassName","click","handleOpen","handleClose","handleUpload","event","preventDefault","collection","add","timestamp","firestore","FieldValue","serverTimestamp","imageUrl","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","alert","message","child","getDownloadURL","then","url","handleChange","e","target","files","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport './ImageUpload.css';\nimport { Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Button from \"@material-ui/core/Button\";\nimport { storage, db } from \"./firebase.js\";\nimport { useHistory } from \"react-router-dom\";\nimport './ImageUpload.css';\nimport firebase from \"firebase\";\n\nfunction getModalStyle() {\n    const top = 50;\n    const left = 50;\n\n    return {\n        top: `${top}%`,\n        left: `${left}%`,\n        transform: `translate(-${top}%, -${left}%)`,\n    };\n}\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        position: 'absolute',\n        width: 500,\n        height: 343,\n        backgroundColor: theme.palette.background.paper,\n        border: '2px solid #DDDFE2',\n        outline: 'none',\n        boxShadow: theme.shadows[5],\n        borderRadius: '5px',\n    },\n}));\n\nfunction ImageUpload({ username }) {\n    const classes = useStyles();\n    const [modalStyle] = useState(getModalStyle);\n    const [open, setOpen] = useState(false);\n    const [comment, setComment] = useState('');\n    const [noLikes, setNoLikes] = useState(0);\n    const [image, setImage] = useState('');\n    const [caption, setCaption] = useState('');\n    const [progress, setProgress] = useState(0);\n\n    const uploadFileWithClick = () => {\n        document.getElementsByClassName('imageFile')[0].click()\n    }\n\n    const handleOpen = () => {\n        setOpen(true)\n    }\n\n    const handleClose = () => {\n        setOpen(false)\n    }\n\n    const handleUpload = (event) => {\n        event.preventDefault()\n\n        if (image == '') {\n            db.collection(\"posts\").add({\n                timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n                caption: caption,\n                imageUrl: image,\n                noLikes: noLikes,\n                username: username\n            })\n        } else {\n            const uploadTask = storage.ref(`images/${image.name}`).put(image);\n            uploadTask.on(\n                \"state_changed\",\n                (snapshot) => {\n                    const progress = Math.round(\n                        (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n                    );\n                    setProgress(progress);\n                },\n                (error) => {\n                    console.log(error);\n                    alert(error.message);\n                },\n                () => {\n                    storage\n                        .ref(\"images\")\n                        .child(image.name)\n                        .getDownloadURL()\n                        .then(url => {\n                            db.collection(\"posts\").add({\n                                timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n                                caption: caption,\n                                imageUrl: url,\n                                noLikes: noLikes,\n                                username: username\n                            });\n                            handleClose();\n                            setProgress(0);\n                            setCaption(\"\")\n                            setImage(null);\n                        })\n                }\n            )\n        }\n    }\n\n    const handleChange = (e) => {\n        if (e.target.files[0]) {\n            setImage(e.target.files[0])\n        }\n    }\n\n    return (\n        <div className=\"imageupload\">\n            <Modal\n                open={open}\n                onClose={handleClose}\n            >\n                <div style={modalStyle} className={classes.paper}>\n                    <form className=\"imageupload__commentAssign\">\n                        <div className=\"imageupload__firstSectionModal\">\n                            <h3>Create Post</h3>\n                        </div>\n                        <div className=\"imageupload__secondSectionModal\">\n                            <Avatar\n                                className=\"imageupload__avatar\"\n                                alt=\"\"\n                            />\n                            <input type=\"text\" onChange={(e) => setCaption(e.target.value)} onClick={handleOpen} placeholder={`What's on your mind ${username} ?`} />\n                        </div>\n                        <hr />\n                        <div className=\"imageupload__imageuploadModal\" onClick={uploadFileWithClick}>\n                            <img src=\"https://image.flaticon.com/icons/svg/3233/3233027.svg\" className=\"imageupload__gallery\" alt=\"\"></img>\n                            <input type=\"file\" className=\"imageFile\" onChange={handleChange} />\n                            <h3>Photo</h3>\n                        </div>\n                        <br />\n                        <div className=\"imageupload__feedModal\">\n                            <label class=\"containerr\">\n                                <input type=\"checkbox\" checked />\n                                <span class=\"checkmark\"></span>\n                            </label>\n                            <div class=\"imageupload__colorwrap1\">\n                                <img src=\"https://www.flaticon.com/premium-icon/icons/svg/1674/1674711.svg\" className=\"imageupload__newsFeed\" />\n                            </div>\n                            <h3>News Feed</h3>\n                            <br />\n                            <h2 className={`imageText ${image && 'show'}`}>Image is added and will be displayed after clicking the Post button</h2>\n                            <Button type=\"submit\" onClick={handleUpload} className=\"imageupload__submitButton\">Post</Button>\n                        </div>\n                    </form>\n                </div>\n            </Modal>\n\n            <div className=\"imageupload__container\">\n                <div className=\"imageupload__firstSection\">\n                    <h3>Create Post</h3>\n                </div>\n\n                <div className=\"imageupload__secondSection\">\n                    <Avatar\n                        className=\"imageupload__avatar\"\n                        alt=\"\"\n                    />\n                    <input type=\"text\" onClick={handleOpen} placeholder={`What's on your mind ${username} ?`} />\n                </div>\n                <hr />\n                <div className=\"uploadimage__options\" onClick={setOpen}>\n                    <div className=\"imageupload__imageupload\">\n                        <img src=\"https://image.flaticon.com/icons/svg/3233/3233027.svg\" className=\"imageupload__gallery\" alt=\"\"></img>\n                        <h3>Photo</h3>\n                    </div>\n                    <div className=\"imageupload__more\">\n\n                        <img src=\"https://image.flaticon.com/icons/svg/860/860760.svg\" className=\"imageupload__dots\" alt=\"\" />\n                    </div>\n                </div>\n                <progress value={progress} max=\"100\" className={`progress ${progress && 'show'}`} />\n            </div>\n        </div>\n    )\n}\n\nexport default ImageUpload\n"]},"metadata":{},"sourceType":"module"}