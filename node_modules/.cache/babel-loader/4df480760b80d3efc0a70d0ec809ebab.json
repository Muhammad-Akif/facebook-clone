{"ast":null,"code":"var _jsxFileName = \"/home/muhammad/Desktop/Working Areas/Saylani Working directory/React/facebook/src/Post.js\";\nimport React, { useState, useEffect } from 'react';\nimport './Post.css';\nimport { Avatar } from '@material-ui/core';\nimport { storage, db } from './firebase';\nimport firebase from \"firebase\";\n\nfunction Post({\n  postId,\n  origuser,\n  username,\n  userId,\n  caption,\n  imageUrl,\n  noLikes\n}) {\n  const [comments, setComments] = useState([]);\n  const [comment, setComment] = useState('');\n  const [show, setShow] = useState('like2');\n  const [show2, setShow2] = useState('textforlike');\n  useEffect(() => {\n    let unsubscribe;\n\n    if (postId) {\n      unsubscribe = db.collection(\"posts\").doc(postId).collection(\"comments\").orderBy(\"timestamp\", \"desc\").onSnapshot(snapshot => {\n        setComments(snapshot.docs.map(doc => doc.data()));\n      });\n    }\n\n    return () => {\n      unsubscribe();\n    };\n  }, [postId]);\n  useEffect(() => {\n    db.collection(\"posts\").doc(postId).collection(\"likes\").doc(userId).get().then(doc2 => {\n      if (doc2.data()) {\n        if (show == 'like2') {\n          setShow('like2 blue');\n          setShow2('textforlike bluetextforlike');\n        } else {\n          setShow('like2');\n          setShow2('textforlike');\n        }\n      }\n    });\n  }, [postId, userId]); // const commentShow = () => {\n  //     var element = document.getElementById('1');\n  //     var element2 = document.getElementById('2');\n  //     if (element.style.display === \"none\") {\n  //         element.style.display = \"flex\";\n  //         element2.style.display = \"block\";\n  //     } else {\n  //         element.style.display = \"none\";\n  //         element2.style.display = \"none\";\n  //     }\n  // }\n\n  const likeHandle = event => {\n    event.preventDefault();\n\n    if (show == 'like2') {\n      setShow('like2 blue');\n      setShow2('textforlike bluetextforlike');\n    } else {\n      setShow('like2');\n      setShow2('textforlike');\n    }\n\n    db.collection('posts').doc(postId).get().then(docc => {\n      const data = docc.data();\n      console.log(show);\n\n      if (show == 'like2') {\n        db.collection(\"posts\").doc(postId).collection(\"likes\").doc(userId).get().then(doc2 => {\n          if (doc2.data()) {\n            console.log(doc2.data());\n          } else {\n            db.collection(\"posts\").doc(postId).collection(\"likes\").doc(userId).set({\n              likes: 1\n            });\n            db.collection('posts').doc(postId).update({\n              noLikes: data.noLikes + 1\n            });\n          }\n        });\n      } else {\n        db.collection('posts').doc(postId).collection('likes').doc(userId).delete().then(function () {\n          db.collection('posts').doc(postId).update({\n            noLikes: data.noLikes - 1\n          });\n        });\n      }\n    });\n  };\n\n  const postComment = event => {\n    event.preventDefault();\n    db.collection(\"posts\").doc(postId).collection(\"comments\").add({\n      text: comment,\n      username: origuser,\n      timestamp: firebase.firestore.FieldValue.serverTimestamp()\n    });\n    setComment('');\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"post__avatar\",\n    alt: \"\",\n    src: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, username), /*#__PURE__*/React.createElement(\"i\", {\n    class: \"post__verified\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"post__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, caption), /*#__PURE__*/React.createElement(\"img\", {\n    src: imageUrl,\n    className: \"post__image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__likeandlove\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"post__like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"i\", {\n    className: \"post__heart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, noLikes, \" Likes\")), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__likeoptions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"like\",\n    onClick: likeHandle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: show,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    className: show2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, \"Like\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"comment2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    class: \"dope\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, \"Comment\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"share\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"share2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  }, \"Share\"))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: postComment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"commentBox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"post__avatar2\",\n    alt: \"\",\n    src: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"commentInputBox\",\n    type: \"text\",\n    placeholder: \"Write a comment ... \",\n    onChange: e => setComment(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    disabled: !comment,\n    className: \"transparent__submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"pressEnterToPost\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, \"Press Enter to post\")), comments.map(comment => /*#__PURE__*/React.createElement(\"div\", {\n    className: `comments__show myself`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"post__avatar2\",\n    alt: \"\",\n    src: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"container__comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 32\n    }\n  }, comment.username), /*#__PURE__*/React.createElement(\"i\", {\n    class: \"post__verified\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 63\n    }\n  }), \"\\xA0 \", comment.text)))));\n}\n\nexport default Post;","map":{"version":3,"sources":["/home/muhammad/Desktop/Working Areas/Saylani Working directory/React/facebook/src/Post.js"],"names":["React","useState","useEffect","Avatar","storage","db","firebase","Post","postId","origuser","username","userId","caption","imageUrl","noLikes","comments","setComments","comment","setComment","show","setShow","show2","setShow2","unsubscribe","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","get","then","doc2","likeHandle","event","preventDefault","docc","console","log","set","likes","update","delete","postComment","add","text","timestamp","firestore","FieldValue","serverTimestamp","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport './Post.css';\nimport { Avatar } from '@material-ui/core';\nimport { storage, db } from './firebase';\nimport firebase from \"firebase\";\n\nfunction Post({ postId, origuser, username, userId, caption, imageUrl, noLikes }) {\n\n    const [comments, setComments] = useState([]);\n    const [comment, setComment] = useState('');\n    const [show, setShow] = useState('like2');\n    const [show2, setShow2] = useState('textforlike');\n\n    useEffect(() => {\n        let unsubscribe;\n        if (postId) {\n            unsubscribe = db.collection(\"posts\").doc(postId).collection(\"comments\").orderBy(\"timestamp\", \"desc\").onSnapshot((snapshot) => {\n                setComments(snapshot.docs.map((doc) => doc.data()));\n            });\n        }\n        return () => {\n            unsubscribe();\n        }\n    }, [postId]);\n\n    useEffect(() => {\n        db.collection(\"posts\")\n            .doc(postId)\n            .collection(\"likes\")\n            .doc(userId)\n            .get()\n            .then(doc2 => {\n                if (doc2.data()) {\n                    if (show == 'like2') {\n                        setShow('like2 blue');\n                        setShow2('textforlike bluetextforlike')\n                    } else {\n                        setShow('like2');\n                        setShow2('textforlike')\n                    }\n                }\n            })\n    }, [postId, userId]);\n\n    // const commentShow = () => {\n    //     var element = document.getElementById('1');\n    //     var element2 = document.getElementById('2');\n    //     if (element.style.display === \"none\") {\n    //         element.style.display = \"flex\";\n    //         element2.style.display = \"block\";\n    //     } else {\n    //         element.style.display = \"none\";\n    //         element2.style.display = \"none\";\n    //     }\n    // }\n\n    const likeHandle = (event) => {\n        event.preventDefault();\n        if (show == 'like2') {\n            setShow('like2 blue');\n            setShow2('textforlike bluetextforlike')\n        } else {\n            setShow('like2');\n            setShow2('textforlike')\n        }\n\n        db.collection('posts')\n            .doc(postId)\n            .get()\n            .then(docc => {\n                const data = docc.data()\n                console.log(show)\n                if (show == 'like2') {\n                    db.collection(\"posts\")\n                        .doc(postId)\n                        .collection(\"likes\")\n                        .doc(userId)\n                        .get()\n                        .then(doc2 => {\n                            if (doc2.data()) {\n                                console.log(doc2.data())\n                            } else {\n                                db.collection(\"posts\").doc(postId).collection(\"likes\").doc(userId).set({\n                                    likes: 1\n                                });\n                                db.collection('posts').doc(postId).update({\n                                    noLikes: data.noLikes + 1\n                                });\n                            }\n                        })\n\n                } else {\n                    db.collection('posts').doc(postId).collection('likes').doc(userId).delete().then(function () {\n                        db.collection('posts').doc(postId).update({\n                            noLikes: data.noLikes - 1\n                        });\n                    })\n                }\n            })\n\n    }\n\n\n    const postComment = (event) => {\n        event.preventDefault();\n\n        db.collection(\"posts\").doc(postId).collection(\"comments\").add({\n            text: comment,\n            username: origuser,\n            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n        });\n        setComment('');\n    }\n\n    return (\n        <div className=\"post\">\n            <div className=\"post__header\">\n                <Avatar\n                    className=\"post__avatar\"\n                    alt=\"\"\n                    src=\"\"\n                />\n                <h3>{username}</h3>\n                <i class=\"post__verified\" />\n            </div>\n\n            <h4 className=\"post__text\">{caption}</h4>\n\n            <img src={imageUrl} className=\"post__image\" />\n\n            <div className=\"post__likeandlove\">\n                <i className=\"post__like\" />\n                <i className=\"post__heart\" />\n                <p>{noLikes} Likes</p>\n            </div>\n\n            <hr />\n\n            <div className=\"post__likeoptions\">\n                <div className=\"like\" onClick={likeHandle}>\n                    <i className={show} />\n                    <h3 className={show2}>Like</h3>\n                </div>\n                <div className=\"comment\">\n                    <i className=\"comment2\" />\n                    <h3 class=\"dope\">Comment</h3>\n                </div>\n                <div className=\"share\">\n                    <i className=\"share2\" />\n                    <h3>Share</h3>\n                </div>\n            </div>\n            <form onSubmit={postComment}>\n                <div className=\"commentBox\">\n                    <Avatar\n                        className=\"post__avatar2\"\n                        alt=\"\"\n                        src=\"\"\n                    />\n                    <input className=\"commentInputBox\" type=\"text\" placeholder=\"Write a comment ... \" onChange={(e) => setComment(e.target.value)} />\n                    <input type=\"submit\" disabled={!comment} className=\"transparent__submit\" />\n                </div>\n                <p className=\"pressEnterToPost\">Press Enter to post</p>\n            </form>\n\n            {\n                comments.map((comment) => (\n                    <div className={`comments__show myself`}>\n                        <Avatar\n                            className=\"post__avatar2\"\n                            alt=\"\"\n                            src=\"\"\n                        />\n                        <div class=\"container__comments\">\n                            <p><span>{comment.username}</span><i class=\"post__verified\"></i>&nbsp; {comment.text}</p>\n                        </div>\n                    </div>\n                ))\n            }\n        </div>\n    )\n}\n\nexport default Post\n"]},"metadata":{},"sourceType":"module"}